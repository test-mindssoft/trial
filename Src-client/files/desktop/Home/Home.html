{% extends "files/desktop/Header/Header.html" %}
{% block content %}
<link rel="stylesheet" type="text/css" href="css/dashboard.css">
<style>
abbr
{
    border-bottom: 1px dotted #666;
    cursor: help;
}

.btn {
  background: #5c5c5c;
  background-image: -webkit-linear-gradient(top, #5c5c5c, #666666);
  background-image: -moz-linear-gradient(top, #5c5c5c, #666666);
  background-image: -ms-linear-gradient(top, #5c5c5c, #666666);
  background-image: -o-linear-gradient(top, #5c5c5c, #666666);
  background-image: linear-gradient(to bottom, #5c5c5c, #666666);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  color: #ffffff;
  font-size: 8px;
  padding: 7px 7px 7px 7px;
  text-decoration: none;
  border-width:0px;

}

.btn:hover {
  background: #9c9d9e;
  background-image: -webkit-linear-gradient(top, #9c9d9e, #c4c4c4);
  background-image: -moz-linear-gradient(top, #9c9d9e, #c4c4c4);
  background-image: -ms-linear-gradient(top, #9c9d9e, #c4c4c4);
  background-image: -o-linear-gradient(top, #9c9d9e, #c4c4c4);
  background-image: linear-gradient(to bottom, #9c9d9e, #c4c4c4);
  text-decoration: none;
  curosr:hand;
}

.tooltip
{
    position:absolute;
    background-color:#eeeefe;
    border: 1px solid #aaaaca;
    font-size: smaller;
    padding:4px;
    width: 160px;
    box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    -webkit-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1); 
}

#radiolabel {
  width: 70px;
  border-radius: 3px;
  border: 1px solid #D1D3D4;
  font-size: 11px;
}

/* hide input */
input.radio:empty {
    margin-left: -999px;
}

/* style label */
input.radio:empty ~ label {
    position: relative; 
    float: left;
    line-height: 2.5em; 
    text-indent: 3.25em;
    margin-top: 2em;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

input.radio:empty ~ label:before {
    position: absolute;
    display: block;
    top: 0;
    bottom: 0;
    left: 0;
    content: '';
    width: 2.5em;
    background: #D1D3D4;
    border-radius: 3px 0 0 3px;
}

/* toggle hover */
input.radio:hover:not(:checked) ~ label:before {
    content:'\2714';
    text-indent: .9em;
    color: #ffffff;
}

input.radio:hover:not(:checked) ~ label {
    color: #888;
}

/* toggle on */
input.radio:checked ~ label:before {
    content:'\2714';
    text-indent: .9em;
    color: #ffffff;
    background-color: #662d91;
}

input.radio:checked ~ label {
    color: #777;
}
.leftmargin 
{
  float: left;
  position: relative;
  width: 150px;
}
.margin10
{
  margin-top: 10px;
}
</style>
<script type="text/javascript">
    $(document).ready(function() {
      $(".dropdown-box-container").click(function() {
        $(".filter-dropdown-container").slideToggle();
      })
      window.testSelAll2 = $('.testSelAll2').SumoSelect({selectAll:false });
      $("#entity-auto").hide();
      $("#division-auto").hide();
      $("#unit-auto").hide();
    })

    $(document).ready(function() {
      loadGroup();
      $("#viewaspie").hide();

      $("#viewaspie").click(function() {
           ele = $('.archive-header').find('.active');
           if(ele.prop("id") == "task"){
              if($("#radio1").is(':checked')){
      				loadCountrySpecific();
      			}else if($("#radio2").is(':checked')){
      				loadCompanySingleSelectionPie();
      			}else if($("#radio3").is(':checked')){
      				loadCompanySingleSelectionPie();
      			}else if($("#radio4").is(':checked')){
      				loadCompanySingleSelectionPie();
      			}
           }else if(ele.prop("id") == "act"){
           		loadCompanySingleSelectionPie();
           }else if(ele.prop("id") == "comp"){
           		loadPieChart();
           }else if(ele.prop("id") == "esc"){
           		loadEscalations();
           }
       })

      $("#viewasbar").click(function() {
           ele = $('.archive-header').find('.active');
           if(ele.prop("id") == "task"){
              if($("#radio1").is(':checked')){
      				loadCountrySpecificBar();
      			}else if($("#radio2").is(':checked')){
      				loadCompanySingleSelection($("#hidden").val());
      			}else if($("#radio3").is(':checked')){
      				loadCompanySingleSelection($("#hidden").val());
      			}else if($("#radio4").is(':checked')){
      				loadCompanySingleSelection($("#hidden").val());
      			}
           }else if(ele.prop("id") == "act"){
           		loadCompanySingleSelection($("#hidden").val());
           }else if(ele.prop("id") == "comp"){
           		loadCompliance();
           }else if(ele.prop("id") == "esc"){
           		loadEscalationsBar();
           }
       })

      $("#back").click(function() {
           ele = $('.archive-header').find('.active');
           if(ele.prop("id") == "task"){
           		if($("#radio1").is(':checked')){
      				loadGroup();
      			}else if($("#radio2").is(':checked')){
      				loadCompany();
      			}else if($("#radio3").is(':checked')){
      				loadDivision();
      			}else if($("#radio4").is(':checked')){
      				loadUnit();
      			}
           }else if(ele.prop("id") == "act"){
           		loadActwise();
           }else if(ele.prop("id") == "comp"){
           		loadCompliance();
           }else if(ele.prop("id") == "esc"){
           		loadEscalations();
           }
       })

      $("#go-le").click(function() {
           ele = $('.archive-header').find('.active');
           if(ele.prop("id") == "task"){
              loadCompany();
           }else if(ele.prop("id") == "act"){
           	  loadActwise();
           }else if(ele.prop("id") == "comp"){
           	  loadCompliance();
           }else if(ele.prop("id") == "esc"){
              loadEscalations();
           }
       })

      $("#go-d").click(function() {
           ele = $('.archive-header').find('.active');
           if(ele.prop("id") == "task"){
              loadDivision();
           }else if(ele.prop("id") == "act"){
           	  loadActwise();
           }else if(ele.prop("id") == "comp"){
           	  loadCompliance();
           }else if(ele.prop("id") == "esc"){
              loadEscalations();
           }
       })

      $("#go-u").click(function() {
           ele = $('.archive-header').find('.active');
           if(ele.prop("id") == "task"){
              loadUnit();
           }else if(ele.prop("id") == "act"){
           	  loadActwise();
           }else if(ele.prop("id") == "comp"){
           	  loadCompliance();
           }else if(ele.prop("id") == "esc"){
              loadEscalations();
           }
       })

      $("#radio1").click(function() {
           ele = $('.archive-header').find('.active');
           if(ele.prop("id") == "comp"){
              loadCompliance();
           }else if(ele.prop("id") == "esc"){
              loadEscalations();
           }else if(ele.prop("id") == "act"){
              loadActwise();
           }else if(ele.prop("id") == "task"){
              loadGroup();
           }
       })

      $("#radio2").click(function() {
            ele = $('.archive-header').find('.active');
            if(ele.prop("id") == "comp"){
              // loadComplianceCompanyLevel();
              loadCompliance();
           }else if(ele.prop("id") == "esc"){
              loadEscalations();
           }else if(ele.prop("id") == "act"){
              loadActwise();
           }else if(ele.prop("id") == "task"){
              loadCompany();
           }
       })

      $("#radio3").click(function() {
            ele = $('.archive-header').find('.active');
            if(ele.prop("id") == "comp"){
              // loadComplianceDivisionLevel();
              loadCompliance();
           }else if(ele.prop("id") == "esc"){
              loadEscalations();
           }else if(ele.prop("id") == "act"){
              loadActwise();
           }else if(ele.prop("id") == "task"){
              loadDivision();
           }
       })

      $("#radio4").click(function() {
            ele = $('.archive-header').find('.active');
            if(ele.prop("id") == "comp"){
              loadCompliance();
           }else if(ele.prop("id") == "esc"){
              loadEscalations();
           }else if(ele.prop("id") == "act"){
              loadActwise();
           }else if(ele.prop("id") == "task"){
              loadUnit();
           }
       })

      $(".actwise-tab").click(function() {
        $(".actwise-tab").addClass("active")
        $(".compliance-tab").removeClass("active")
        $(".esc-tab").removeClass("active")
        $(".task-status-tab").removeClass("active")
		$(".usecom-tab").removeClass("active")
		$(".graph-box").show();
		$(".grid-table-dash").hide();
		$(".grid-table-dash1").hide();
        $("#level-filter").fadeIn();
        $("#viewaspie").hide();
        $("#unit-auto").show();
        $("#entity-auto").show();
        $("#division-auto").show();
        $("#legal-entity").hide();
        $("#division").hide();
        $("#unit").hide();
        loadActwise();
      })

      $(".task-status-tab").click(function() {
      	$(".task-status-tab").addClass("active")
        $(".actwise-tab").removeClass("active")
        $(".compliance-tab").removeClass("active")
        $(".esc-tab").removeClass("active")
		$(".usecom-tab").removeClass("active")
		$(".graph-box").show();
		$(".grid-table-dash").hide();
		$(".grid-table-dash1").hide();
        $("#level-filter").fadeIn();
        $("#viewaspie").hide();
        $("#unit-auto").hide();
        $("#entity-auto").hide();
        $("#division-auto").hide();
        $(".SumoSelect").show();
        loadGroup();
      })
      
      $(".compliance-tab").click(function() {
        $(".compliance-tab").addClass("active")
        $(".actwise-tab").removeClass("active")
        $(".esc-tab").removeClass("active")
		$(".usecom-tab").removeClass("active")
		$(".task-status-tab").removeClass("active")
		$(".graph-box").show();
		$(".grid-table-dash").hide();
		$(".grid-table-dash1").hide();
        $("#level-filter").fadeIn();
        $("#viewaspie").fadeIn();
        $("#unit-auto").show();
        $("#entity-auto").show();
        $("#division-auto").show();
        $("#legal-entity").hide();
        $("#division").hide();
        $("#unit").hide();
        loadCompliance();
      })

      $(".esc-tab").click(function() {
        $(".esc-tab").addClass("active")
        $(".actwise-tab").removeClass("active")
        $(".compliance-tab").removeClass("active")
        $(".task-status-tab").removeClass("active");
		$(".usecom-tab").removeClass("active")
		$(".graph-box").show();
		$(".grid-table-dash").hide();
		$(".grid-table-dash1").hide();
        $("#level-filter").fadeIn();
        $("#viewaspie").hide();
        $(".SumoSelect").hide();
        $("#unit-auto").show();
        $("#entity-auto").show();
        $("#division-auto").show();
        loadEscalations();
      })
	  
	  $(".usecom-tab").click(function() {
	  	$(".task-status-tab").removeClass("active");
        $(".usecom-tab").addClass("active")
        $(".actwise-tab").removeClass("active")
        $(".compliance-tab").removeClass("active")
		$(".esc-tab").removeClass("active")
		$("#level-filter").hide();
		$(".graph-box").hide();
		$(".archive-tab-content").show();
		$(".grid-table-dash").show();
		$(".grid-table-dash1").hide();
		$("#viewaspie").hide();
      })
	  
	  $(".usecom1-tab").click(function() {
        $(".usecom-tab").addClass("active");
        $(".actwise-tab").removeClass("active");
        $(".compliance-tab").removeClass("active");
        $(".task-status-tab").removeClass("active");
		$(".esc-tab").removeClass("active");
        $("#level-filter").hide();
		$(".grid-table-dash").hide();
		$(".grid-table-dash1").show();
        $("#viewaspie").hide();
      })

    })

    function loadPieChart(){
    	$("#viewaspie").hide();
    	$("#viewasbar").show();
    	$("#back").hide();
        $(function () {
            var color = [6];
            var applied = 0;
            var not_applied = 0;
            title="";
             if($('#radio4').is(':checked')){
                color= ['#00FF00','#FFA500','#FFC0CB','#008000','#FF0000'  ];
                applied = 20;
                not_applied = 4;
                drill="unitcomp";
                title=" - South Gate, Madurai";
            }else if($('#radio3').is(':checked')){
                color= ['#FFA500','#FF0000' ,'#FFC0CB', '#00FF00','#008000' ];
                applied = 10;
                not_applied = 4;
                drill="divisioncomp";
                title=" - Manufacturing Division";
            }else if($('#radio2').is(':checked')){
                color= ['#008000', '#FFA500', '#FF0000', '#FFC0CB', '#00FF00'];
                applied = 12;
                not_applied = 6;
                drill="entitycomp";
                title=" - KG & Sons";
            }else if($('#radio1').is(':checked')){
               color= [Highcharts.getOptions().colors[2],Highcharts.getOptions().colors[5] ,'#FFC0CB', '#00FF00','#008000' ]; 
               applied = 10;
               not_applied = 8;
               drill="groupcomp";
               title=" - KG Groups";
            }
            $('#container').highcharts({
                colors : color,
                chart: {
                    type: 'pie',
                    options3d: {
                        enabled: true,
                        alpha: 45,
                        beta: 0
                    }
                },
                title: {
                    text: 'Compliance Opportunity'+title
                },
                tooltip: {
                    headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                    pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b> of total<br/>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        depth: 35,
                        dataLabels: {
                            enabled: true,
                            format: '{point.name}'
                        },
                        point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) {
                                 loadDrillDownData(drilldown); 
                                }
                            }
                          }
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Tasks',
                    data: [
                    	{
                    		name : "Applied Tasks",
                    		y:applied,
                    	},
                    	{
                    		name : "Not Applicable Tasks",
                    		y:not_applied,
                    		drilldown:drill
                    	}
                    ]
                }]
            });
        });
    }

    function loadTrendChart(title){
    	$("#back").show();
        $(function () {
		    $('#container').highcharts({
		        chart: {
		            type: 'spline'
		        },
		        title: {
		            text: 'KG Transports'
		        },
		        subtitle: {
		            text: 'Task Completed(2014 and 2015)'
		        },
		        xAxis: {
		            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
		                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
		                labels: {
		                      useHTML: true,
		                      formatter: function() {
		                          var name=this.value;
		                          var link = '<a href="#"  id="'+name+'" onclick=loadDrillDownData(this.id) >'+
		                              name +'</a>'
		                          return link;
		                      }
		                  },
                 title: {
                    text: 'Months'
                },
		        },
		        yAxis: {
		            title: {
		                text: 'Tasks (%)'
		            },
		            labels: {
		                formatter: function () {
		                    return this.value + '%';
		                }
		            }
		        },
		        tooltip: {
		            crosshairs: true,
		            shared: true
		        },
		        plotOptions: {
		            spline: {
		                marker: {
		                    radius: 4,
		                    lineColor: '#666666',
		                    lineWidth: 1
		                }
		            }
		        },
		        series: [
		        {
		            name: '2014',
		            marker: {
		                symbol: 'diamond'
		            },
		            data: [60, 56, 54,58, 64,66, 64, 62, 60, 58, 60, 62]
		        },{
		            name: '2015',
		            marker: {
		                symbol: 'square'
		            },
		            data: [50, 55, 60, 65, 70, 74, 72, 68, 64, 66, 68, 70]

		        }, ]
		    });
		});      
    }

    
    function loadCompanySingleSelectionPie(){
    	$("#viewaspie").hide();
    	$("#viewasbar").show();
    	var name = $("#hidden").val();
    	$(function () {
            $('#container').highcharts({
            	//colors:['#09DE70','#99FF00','#F6FF00','#FC0A0A'],
				colors:['#239e13','#a3d202','#faf216','#e70808'],
                chart: {
                    type: 'pie',
                    options3d: {
                        enabled: true,
                        alpha: 45,
                        beta: 0
                    }
                },
                title: {
                    text: name 
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.y}</b>'
                },
                // colors: ['#A9FF96', '#F7A35C',  '#FDE744','#881008'],
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        depth: 35,
                        dataLabels: {
                            enabled: true,
                            format: '{point.name}'
                        },
                      point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) { 
                                	loadDrillDownData(drilldown);
                                }
                            }
                          }
                        }

                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Tasks',
                    data: [
                    	{
                    		name:"Complied",
                    		y:5,
                    		drilldown:"Complied"
                    	},{
                    		name:"Delayed Compliance",
                    		y:2,
                    		drilldown:"Delayed"
                    	},{
                    		name:"Inprogress",
                    		y:8,
                    		drilldown:"Inprogress"
                    	},{
                    		name:"Not Complied",
                    		y:3,
                    		drilldown:"NotComplied"
                    	},
                    ]
                }]
            });
        });
    }

    function loadCompanySingleSelection(name){
    	$(function () {
    		$("#viewaspie").show();
    		$("#viewasbar").hide();
    		$("#hidden").val(name);
		    $('#container').highcharts({
		        colors:['#239e13','#a3d202','#faf216','#e70808'],
		        chart: {
		            type: 'column'
		        },
		        title: {
		            text: name
		        },
		        xAxis: {
		            type: 'category',
                title: {
                    text: 'Task Status'
                },
		        },
		        yAxis: {
		            title: {
		                text: 'Total Tasks'
		            }

		        },
		        legend: {
		            enabled: false
		        },
		        plotOptions: {
		        	column:{
		        		point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) {
                                 loadDrillDownData(drilldown); 
                                }
                            }
                          }
                        }
		        	},
		            series: {
		                borderWidth: 0,
		                dataLabels: {
		                    enabled: true,
		                    format: '{point.y:.0f}'
		                }
		            }
		        },

		        tooltip: {
		            headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
		            pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.0f}</b> tasks<br/>'
		        },

		        series: [{
		            name: "Tasks - Group wise",
		            colorByPoint: true,
		            data: [{
		                name: "Complied",
		                y: 5,
		                drilldown:"Complied"
		            }, {
		                name: "Delayed Compliance",
		                y: 2,
		                drilldown:"Delayed"
		            }, {
		                name: "Inprogress",
		                y: 8,
		                drilldown: "Inprogress"
		            }, {
		                name: "Not Complied",
		                y: 3,
		                drilldown:"NotComplied"
		            }]
		        }],
		    });
		});
    }

    function loadCompany(){
    	$(function () {  
    	  // var values = $("#legal-entity").next().find(":checked").map( function() { return this.value; });
    	  var inprogress_data = [5];
    	  var pending_data = [5];
    	  var completed_data = [5];
    	  var not_complied = [5];
    	  var values = $("#legal-entity").val();
    	  if(values.length > 1){
	    	  for(var i=0;i<values.length;i++){
	    	  	if (values[i] ==  "KG Transports"){
	    	  		inprogress_data[i] = {name: 'KG Transports',y: 8,drilldown:"Inprogress"};
	    	  		pending_data[i] = {name: 'KG Transports',y: 2,drilldown:"Delayed"};
	    	  		completed_data[i] = {id:'fin',name: 'KG Transports',y: 5,drilldown:"Complied"};
	    	  		not_complied[i] = {name: 'KG Transports',y: 3,drilldown:"NotComplied"};
	    	  	}else if(values[i] ==  "KG Autoparts"){
	    	  		inprogress_data[i] = {name: 'KG Autoparts',y: 8,};
	    	  		pending_data[i] = {name: 'KG Autoparts',y: 5,};
	    	  		completed_data[i] = {id:'fin',name: 'KG Autoparts',y: 3};
	    	  		not_complied[i] = {name:"KG Autoparts", y:4}
	    	  	}else if(values[i] ==  "KG Booking"){
	    	  		inprogress_data[i] = {name: 'KG Booking',y: 5};
	    	  		pending_data[i] = {name: 'KG Booking',y: 3};
	    	  		completed_data[i] = {id:'fin',name: 'KG Booking',y: 6};
	    	  		not_complied[i] = {name:"KG Booking", y:3}
	    	  	}else if(values[i] ==  "KG Electricals"){
	    	  		inprogress_data[i] = {name: 'KG Electricals',y: 5};
	    	  		pending_data[i] = {name: 'KG Electricals',y: 2};
	    	  		completed_data[i] = {id:'fin',name: 'KG Electricals',y: 3};
	    	  		not_complied[i] = {name:"KG Electricals", y:4}
	    	  	}else if(values[i] ==  "KG Mobiles"){
	    	  		inprogress_data[i] = {name: 'KG Mobiles',y: 2};
	    	  		pending_data[i] = {name: 'KG Mobiles',y: 6};
	    	  		completed_data[i] = {id:'fin',name: 'KG Mobiles',y: 3};
	    	  		not_complied[i] = {name:"KG Mobiles", y:4}
	    	  	}

	    	  }
	      }else if(values.length <=0){
	      	alert("Select atleast one legal entity to load chart");
	      }else{
	      	loadCompanySingleSelection(values[0]);
	      }
          $('#container').highcharts({
          	colors:['#239e13','#a3d202','#faf216','#e70808'],
              chart: {
                  type: 'column',
                  events: {
                  drilldown: function (e) {
                    loadDrillDownData("hai");
                  }
                }
              },
              title: {
                  text: 'Legal Entity Level'
              },
              xAxis: {
                  type: 'category',
                  labels: {
                      useHTML: true,
                      formatter: function() {
                          var name=this.value;
                          if(name=="KG Transports"){
	                          var link = '<a href="#"  id="'+name+'" onclick=loadTrendChart(this.id) >'+
	                              name +'</a>'
	                          return link;
                      	   }else{
                      	   		var link = '<span id="'+name+'"  >'+
	                              name +'</span>'
	                          return link;
                      	   }
                      }
                  },
                  title: {
                    text: 'Legal Entities'
                },
              },
			   yAxis: {
                  min: 0,
                  title: {
                      text: 'Total Tasks'
                  }
              },
              legend: {
                  enabled: true
              },

              plotOptions: {
                  column: {
                    stacking: 'normal',
                    cursor: 'pointer',
                      point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                loadDrillDownData(drilldown);
                            }
                          }
                        }
                    },
                  series: {
                      borderWidth: 0,
                      dataLabels: {
                          enabled: true,
                          style: {
                              color: 'white',
                              textShadow: '0 0 2px black, 0 0 2px black'
                          }
                      },
                      stacking: 'normal'
                  }
              },
              drilldown: {
                  activeDataLabelStyle: {
                      color: 'white',
                      textShadow: '0 0 2px black, 0 0 2px black'
                  },
                  series: [
                  ]
              },
              series: [{
                  name: 'Complied',
                  data : completed_data,
              }, {
                  name: 'Delayed Compliance',
                  data:pending_data
              }, {
                  name: 'Inprogress',
              	data:inprogress_data
            }, {
                name: 'Not Complied',
              	data:not_complied
            }],
          })
      });
    }

    function loadDivision(){
      $(function () { 
      	  var inprogress_data = [5];
    	  var pending_data = [5];
    	  var completed_data = [5];
    	  var not_complied = [5];
    	  var values = $("#division").val();
    	  if(values.length > 1){
	    	  for(var i=0;i<values.length;i++){
	    	  	if (values[i] ==  "KG Manufacturing"){
	    	  		inprogress_data[i] = {name: 'KG Manufacturing',y: 8,drilldown:"Inprogress"};
	    	  		pending_data[i] = {name: 'KG Manufacturing',y: 2,drilldown:"Delayed"};
	    	  		completed_data[i] = {id:'fin',name: 'KG Manufacturing',y: 5,drilldown:"Complied"};
	    	  		not_complied[i] = {name: 'KG Manufacturing',y: 3,drilldown:"NotComplied"};
	    	  	}else if(values[i] ==  "KG Quality Checking"){
	    	  		inprogress_data[i] = {name: 'KG Quality Checking',y: 8,};
	    	  		pending_data[i] = {name: 'KG Quality Checking',y: 5,};
	    	  		completed_data[i] = {id:'fin',name: 'KG Quality Checking',y: 3};
	    	  		not_complied[i] = {name:"KG Quality Checking", y:4}
	    	  	}else if(values[i] ==  "KG Sales"){
	    	  		inprogress_data[i] = {name: 'KG Sales',y: 5};
	    	  		pending_data[i] = {name: 'KG Sales',y: 3};
	    	  		completed_data[i] = {id:'fin',name: 'KG Sales',y: 6};
	    	  		not_complied[i] = {name:"KG Sales", y:3}
	    	  	}else if(values[i] ==  "KG Testing"){
	    	  		inprogress_data[i] = {name: 'KG Testing',y: 5};
	    	  		pending_data[i] = {name: 'KG Testing',y: 2};
	    	  		completed_data[i] = {id:'fin',name: 'KG Testing',y: 3};
	    	  		not_complied[i] = {name:"KG Testing", y:4}
	    	  	}else if(values[i] ==  "KG Administration"){
	    	  		inprogress_data[i] = {name: 'KG Administration',y: 2};
	    	  		pending_data[i] = {name: 'KG Administration',y: 6};
	    	  		completed_data[i] = {id:'fin',name: 'KG Administration',y: 3};
	    	  		not_complied[i] = {name:"KG Administration", y:4}
	    	  	}
	    	  }
	      }else if(values.length <=0){
	      	alert("Select atleast one Division to load chart");
	      }else{
	      	loadCompanySingleSelection(values[0]);
	      } 
          $('#container').highcharts({
          	colors:['#239e13','#a3d202','#faf216','#e70808'],
              chart: {
                  type: 'column',
                  events: {
                  drilldown: function (e) {
                    loadDrillDownData("hai");
                  }
                }
              },
              title: {
                  text: 'Division Level'
              },
              xAxis: {
                  type: 'category',
                  labels: {
                      useHTML: true,
                      formatter: function() {
                          var name=this.value;
                          if(name == "KG Manufacturing"){
	                          var link = '<a href="#"  id="'+name+'" onclick=loadTrendChart(this.id) >'+
	                              name +'</a>'
	                          return link;
                      	  }else{
                      	  	var link = '<span id="'+name+'" >'+
	                              name +'</span>'
	                          return link;
                      	  }
                      }
                  },
                  title: {
                    text: 'Divisions'
                },
              },
			   yAxis: {
                  min: 0,
                  title: {
                      text: 'Total Tasks'
                  }
              },
              legend: {
                  enabled: true
              },

              plotOptions: {
                  column: {
                    stacking: 'normal',
                    cursor: 'pointer',
                      point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) { 
                                    loadDrillDownData(drilldown);
                                } else { 
                                }
                            }
                          }
                        }
                    },
                  series: {
                      borderWidth: 0,
                      dataLabels: {
                          enabled: true,
                          style: {
                              color: 'white',
                              textShadow: '0 0 2px black, 0 0 2px black'
                          }
                      },
                      stacking: 'normal'
                  }
              },

              series: [{
                  name: 'Complied',
                  data: completed_data
              }, {
                  name: 'Delayed Compliance',
                  data: pending_data,
              }, {
                  name: 'Inprogress',
                  data: inprogress_data,
              }, {
                  name: 'Not Complied',
                  data: not_complied,
              }],

              drilldown: {
                  activeDataLabelStyle: {
                      color: 'white',
                      textShadow: '0 0 2px black, 0 0 2px black'
                  },
                  series: [
                  ]
              }
          })
      });
    }

    function loadUnit(){
     $(function () { 
     	  var inprogress_data = [5];
    	  var pending_data = [5];
    	  var completed_data = [5];
    	  var not_complied = [5];
    	  var values = $("#unit").val();
    	  if(values.length > 1){
	    	  for(var i=0;i<values.length;i++){
	    	  	if (values[i] ==  "Aviyur, Madurai"){
	    	  		inprogress_data[i] = {name: 'Aviyur, Madurai',y: 8,drilldown:"Inprogress"};
	    	  		pending_data[i] = {name: 'Aviyur, Madurai',y: 2,drilldown:"Delayed"};
	    	  		completed_data[i] = {id:'fin',name: 'Aviyur, Madurai',y: 5,drilldown:"Complied"};
	    	  		not_complied[i] = {name: 'Aviyur, Madurai',y: 3,drilldown:"NotComplied"};
	    	  	}else if(values[i] ==  "Padi, Chennai"){
	    	  		inprogress_data[i] = {name: 'Padi, Chennai',y: 8,};
	    	  		pending_data[i] = {name: 'Padi, Chennai',y: 5,};
	    	  		completed_data[i] = {id:'fin',name: 'Padi, Chennai',y: 3};
	    	  		not_complied[i] = {name:"Padi, Chennai", y:4}
	    	  	}else if(values[i] ==  "Periyar, Madurai"){
	    	  		inprogress_data[i] = {name: 'Periyar, Madurai',y: 5};
	    	  		pending_data[i] = {name: 'Periyar, Madurai',y: 3};
	    	  		completed_data[i] = {id:'fin',name: 'Periyar, Madurai',y: 6};
	    	  		not_complied[i] = {name:"Periyar, Madurai", y:3}
	    	  	}else if(values[i] ==  "Mattuthavani, Madurai"){
	    	  		inprogress_data[i] = {name: 'Mattuthavani, Madurai',y: 5};
	    	  		pending_data[i] = {name: 'Mattuthavani, Madurai',y: 2};
	    	  		completed_data[i] = {id:'fin',name: 'Mattuthavani, Madurai',y: 3};
	    	  		not_complied[i] = {name:"Mattuthavani, Madurai", y:4}
	    	  	}else if(values[i] ==  "South Gate, Madurai"){
	    	  		inprogress_data[i] = {name: 'South Gate, Madurai',y: 2};
	    	  		pending_data[i] = {name: 'South Gate, Madurai',y: 6};
	    	  		completed_data[i] = {id:'fin',name: 'South Gate, Madurai',y: 3};
	    	  		not_complied[i] = {name:"South Gate, Madurai", y:4}
	    	  	}
	    	  }
	      }else if(values.length <=0){
	      	alert("Select atleast one Unit to load chart");
	      }else{
	      	loadCompanySingleSelection(values[0]);
	      }  
          $('#container').highcharts({
          	colors:['#239e13','#a3d202','#faf216','#e70808'],
              chart: {
                  type: 'column',
                  events: {
                  drilldown: function (e) {
                    loadDrillDownData("hai");
                  }
                }
              },
              title: {
                  text: 'Unit Level'
              },
              xAxis: {
                  type: 'category',
                  labels: {
                      useHTML: true,
                      formatter: function() {
                          var name=this.value;
                          if(name == "Aviyur, Madurai"){
	                          var link = '<a href="#"  id="'+name+'" onclick=loadTrendChart(this.id) >'+
	                              name +'</a>'
	                          return link;
                         }else{
                         	var link = '<span   id="'+name+'" >'+
	                              name +'</span>'
	                          return link;
                         }
                      }
                  },
                  title: {
                    text: 'Units'
                },
              },
			   yAxis: {
                  min: 0,
                  title: {
                      text: 'Total Tasks'
                  }
              },
              legend: {
                  enabled: true
              },

              plotOptions: {
                  column: {
                    stacking: 'normal',
                    cursor: 'pointer',
                      point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) { 
                                    loadDrillDownData(drilldown);
                                }
                            }
                          }
                        }
                    },
                  series: {
                      borderWidth: 0,
                      dataLabels: {
                          enabled: true,
                          style: {
                              color: 'white',
                              textShadow: '0 0 2px black, 0 0 2px black'
                          }
                      },
                      stacking: 'normal'
                  }
              },

              series: [{
                  name: 'Complied',
                  data: completed_data
              }, {
                  name: 'Delayed Compliance',
                  data: pending_data
              }, {
                  name: 'Inprogress',
                  data: inprogress_data
              }, {
                  name: 'Not Complied',
                  data: not_complied
              }],

              drilldown: {
                  activeDataLabelStyle: {
                      color: 'white',
                      textShadow: '0 0 2px black, 0 0 2px black'
                  },
                  series: [
                  ]
              }
          })
      });
    }

    function loadDrillDownData(name){
    	$("#viewaspie").hide();
    	$("#viewasbar").hide();
    	$("#back").show();
    	var img_name="";
    	var margin_style="";
    	if(name == "Inprogress"){
    		img_name = "/images/dash-list/task-group-inprogress.png";
            name = "Inprogress Tasks";
            margin_style="margin-left:5px";
    	}else if(name == "Delayed"){
    		img_name = "/images/dash-list/task-group-delayed.png";
    		name = "Delayed Compliance";
    	}else if(name == "NotComplied"){
    		img_name = "/images/dash-list/task-group-notcomplied.png";
    		name = "Not Complied";
    	}else if(name == "Complied"){
    		img_name = "/images/dash-list/task-group-complied.png";
    		name = "Complied Tasks";
    	}else if(name == "unitesc"){
    		img_name = "/images/dash-list/escalations-unit-delayed.png";
    		name = "Escalations Unitwise";
    		margin_style="margin-left:200px";
    	}else if(name == "divisionesc"){
    		img_name = "/images/dash-list/escalations-division-delayed.png";
    		name = "Escalations Divisionwise";
    		margin_style="margin-left:100px";
    	}else if(name == "entityesc"){
    		img_name = "/images/dash-list/escalations-entity-delayed.png";
    		name = "Escalations Legal Entitywise";
    		margin_style="margin-left:55px";
    	}else if(name == "groupesc"){
    		img_name = "/images/dash-list/escalations-group-delayed.png";
    		name = "Escalations Groupwise";
    	}else if(name == "unitcomp"){
    		img_name = "/images/dash-list/complienceopportunity-unit-not.png";
    		name = "South Gate, Madurai - Not Applicable Compliances";
    		margin_style="margin-left:200px";
    	}else if(name == "divisioncomp"){
    		img_name = "/images/dash-list/complienceopportunity-division-not.png";
    		name = "Manufacturing Division - Not Applicable Compliances";
    		margin_style="margin-left:100px";
    	}else if(name == "entitycomp"){
    		img_name = "/images/dash-list/complienceopportunity-entity-not.png";
    		name = "KG Entity- Not Applicable Compliances";
    		margin_style="margin-left:40px";
    	}else if(name == "groupcomp"){
    		img_name = "/images/dash-list/complienceopportunity-group-not.png";
    		name = "KG Groups - Not Applicable Compliances";
    	}
    	var htmlstr = '<div style="'+margin_style+'"><h2 style="margin-left:10px;font-size:20px">'+name+'</h2><br><img src='+img_name+'></div>';
       $(function () {
        $('#container').html(htmlstr);
    });
    }

    function loadCountrySpecificBar(value){
    	$("#viewaspie").show();
    	$("#viewasbar").hide();
    	$("#back").show();
    	$(function () {
		    $('#container').highcharts({
		        colors:['#239e13','#a3d202','#faf216','#e70808'],
		        chart: {
		            type: 'column'
		        },
		        title: {
		            text: 'Group Level Compliances - India'
		        },
		        xAxis: {
		            type: 'category',
                  title: {
                    text: 'Task Status'
                },
		        },
		        yAxis: {
		            title: {
		                text: 'Total Tasks'
		            }

		        },
		        legend: {
		            enabled: false
		        },
		        plotOptions: {
		        	column:{
		        		point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) {
                                 loadDrillDownData(drilldown); 
                                }
                            }
                          }
                        }
		        	},
		            series: {
		                borderWidth: 0,
		                dataLabels: {
		                    enabled: true,
		                    format: '{point.y:.0f}'
		                }
		            }
		        },

		        tooltip: {
		            headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
		            pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.0f}</b> of total<br/>'
		        },

		        series: [{
		            name: "Tasks - Group wise",
		            colorByPoint: true,
		            data: [{
		                name: "Complied",
		                y: 5,
		                drilldown: "Complied"
		            }, {
		                name: "Delayed Compliance",
		                y: 2,
		                drilldown: "Delayed"
		            }, {
		                name: "Inprogress",
		                y: 8,
		                drilldown: "Inprogress"
		            }, {
		                name: "Not Complied",
		                y: 3,
		                drilldown: "NotComplied"
		            }]
		        }],
		    });
		});

    }

    function loadCountrySpecific(value){
    	$("#viewaspie").hide();
    	$("#back").show();
    	$("#viewasbar").show();
        $(function () {
            $('#container').highcharts({
            	colors:['#239e13','#a3d202','#faf216','#e70808'],
                chart: {
                    type: 'pie',
                    options3d: {
                        enabled: true,
                        alpha: 45,
                        beta: 0
                    }
                },
                title: {
                    text: "Group Level Compliances - "+value 
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.y}</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        depth: 35,
                        dataLabels: {
                            enabled: true,
                            format: '{point.name}'
                        },
                      point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) { 
                                	loadDrillDownData(drilldown);
                                }
                            }
                          }
                        }

                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Tasks',
                    data: [
                    	{
			                name: "Complied",
			                y: 5,
			                drilldown: "Complied"
			            }, {
			                name: "Delayed Compliance",
			                y: 2,
			                drilldown: "Delayed"
			            }, {
			                name: "Inprogress",
			                y: 8,
			                drilldown: "Inprogress"
			            }, {
			                name: "Not Complied",
			                y: 3,
			                drilldown: "NotComplied"
			            },
                        // ['Complied',   5],
                        // ['Delayed Compliance',       2],
                        // ['inprogress',    8],
                        // ['Not Complied',     3]
                    ]
                }]
            });
        });
    }


	function loadGroup(){
		$("#viewaspie").hide();
    	$("#back").hide();
    	$("#viewasbar").hide();
    	$(".SumoSelect").show();
    	$("#entity-auto").hide();
    	$("#division-auto").hide();
    	$("#unit-auto").hide();
		$(function () {
		    $('#container').highcharts({
		        colors:['#239e13','#a3d202','#faf216','#e70808'],
		        chart: {
		            type: 'column'
		        },
		        title: {
		            text: 'Group Level Compliances'
		        },
		        subtitle: {
		            text: 'Countrywise'
		        },
		        xAxis: {
		            categories: ['India', 'US', 'Singapore', 'Malaysia', 'China'],
		            labels: {
                      useHTML: true,
                      formatter: function() {
                          var name=this.value;
                          var link = '<a href="#"  id="'+name+'" onclick=loadCountrySpecific(this.id) >'+
                              name +'</a>'
                          return link;
                      }
                  },
                  title: {
                    text: 'Countries'
                },
		        },
		        yAxis: {
		            min: 0,
		            title: {
		                text: 'Total Compliance'
		            },
		            stackLabels: {
		                enabled: true,
		                style: {
		                    fontWeight: 'bold',
		                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
		                }
		            }
		        },
		        legend: {
		            align: 'right',
		            x: -35,
		            verticalAlign: 'top',
		            y: 25,
		            floating: false,
		            backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
		            borderColor: '#CCC',
		            borderWidth: 1,
		            shadow: false
		        },
		        tooltip: {
		            headerFormat: '<b>{point.x}</b><br/>',
		            pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
		        },
		        plotOptions: {
		            column: {
		                stacking: 'normal',
		                dataLabels: {
		                    enabled: true,
		                    color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
		                    style: {
		                        textShadow: '0 0 3px black'
		                    }
		                }
		            }
		        },
		        series: [{
		            name: 'Complied',
		            data: [5, 3, 4, 7, 2]
		        }, {
		            name: 'Delayed Compliance',
		            data: [2, 2, 3, 2, 1]
		        }, {
		            name: 'Inprogress',
		            data: [8, 4, 4, 2, 5]
		        }, {
		            name: 'Not Complied',
		            data: [3, 4, 4, 2, 5]
		        }]
		    });
		});
	}

    function loadCompliance(){
    	$("#viewasbar").hide();
    	$("#viewaspie").show();
    	$(".SumoSelect").hide();
    	$("entity-auto").show();
    	$("division-auto").show();
    	$("unit-auto").show();
    	$("#back").hide();
        $(function () {
        	var color = [6];
        	var applied = 0;
            var not_applied = 0;
            var drill = "";
            var title="";
            if($('#radio4').is(':checked')){
                color= ['#00FF00','#FFA500','#FFC0CB','#008000','#FF0000'  ];
                applied = 20;
                not_applied = 4;
                drill="unitcomp";
                title=" - South Gate, Madurai";
            }else if($('#radio3').is(':checked')){
                color= ['#FFA500','#FF0000' ,'#FFC0CB', '#00FF00','#008000' ];
                applied = 50;
                not_applied = 4;
                drill="divisioncomp";
                title=" - Manufacturing Division";
            }else if($('#radio2').is(':checked')){
                color= ['#008000', '#FFA500', '#FF0000', '#FFC0CB', '#00FF00'];
                applied = 20;
                not_applied = 6;
                drill="entitycomp";
                title=" - KG Entity";
            }else if($('#radio1').is(':checked')){
               color= [Highcharts.getOptions().colors[2],Highcharts.getOptions().colors[5] ,'#FFC0CB', '#00FF00','#008000' ]; 
               applied = 10;
               not_applied = 8;
               drill="groupcomp";
               title=" - KG Groups";
            }
            $('#container').highcharts({
            	colors : color,
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Compliance Opportunity'+title
                },
                xAxis: {
                    type: 'category',
                    labels: {
		                      useHTML: true,
		                      formatter: function() {
		                          var name=this.value;
		                          if(name == "Not Applicable"){
			                          var link = '<a href="#"  id="'+name+'" onclick=loadCompanySingleSelection(this.id) >'+
			                              name +'</a>'
			                          return link;
		                      	  }else{
		                      	  	var link = '<span  id="'+name+'" >'+
			                              name +'</span>'
			                          return link;
		                      	  }
		                     }
		                  },
                  title: {
                    text: 'Compliances'
                },
                },
                yAxis: {
                    title: {
                        text: 'Total Tasks'
                    }

                },
                legend: {
                    enabled: false
                },
                plotOptions: {
                	column:{
		        		point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) {
                                 loadDrillDownData(drilldown); 
                                }
                            }
                          }
                        }
		        	},
                    series: {
                        borderWidth: 0,
                        dataLabels: {
                            enabled: true,
                            format: '{point.y:.0f}'
                        }
                    }
                },

                tooltip: {
                    headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                    pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.0f}</b> of total<br/>'
                },

                series: [{
                    name: "Tasks",
                    colorByPoint: true,
                    data: [{
                        name: "Applied Tasks",
                        y: applied,
                    }, {
                        name: "Not Applicable Tasks",
                        y: not_applied,
                        drilldown:drill
                    }]
                }]        
            });
        });
    }

    function loadActwise(){
      $(function () {
          $("#viewasbar").hide();
      		$(".SumoSelect").hide();
      		var complied = [4];
      		var not_complied = [4];
      		var delayed = [4];
      		var inprogress = [4];
      		if($("#radio1").is(':checked')){
      			complied = [5, 5, 3];
	      		not_complied = [3, 2, 2];
	      		delayed = [2,5,7];
	      		inprogress = [8,2,3];
      		}else if($("#radio2").is(':checked')){
      			complied = [5, 1, 3];
	      		not_complied = [3, 4, 5];
	      		delayed = [2,5,1];
	      		inprogress = [8,5,2];
      		}else if($("#radio3").is(':checked')){
      			complied = [5, 2, 3];
	      		not_complied = [3, 4, 4];
	      		delayed = [2,3,2];
	      		inprogress = [8,5,3];
      		}else if($("#radio4").is(':checked')){
      			complied = [5, 1, 3];
	      		not_complied = [3, 3, 1];
	      		delayed = [2,1,3];
	      		inprogress = [8,4,3];
      		}
		    $('#container').highcharts({
		        colors:['#239e13','#a3d202','#faf216','#e70808'],
		        chart: {
		            type: 'column'
		        },
		        title: {
		            text: 'Domainwise Compliance'
		        },
		        xAxis: {
		            categories: ['Finance', 'Labour Law', 'Industrial Law'],
		            labels: {
		                      useHTML: true,
		                      formatter: function() {
		                          var name=this.value;
		                          if(name == "Finance"){
			                          var link = '<a href="#"  id="'+name+'" onclick=loadCompanySingleSelection(this.id) >'+
			                              name +'</a>'
			                          return link;
		                      	  }else{
		                      	  	var link = '<span  id="'+name+'" >'+
			                              name +'</span>'
			                          return link;
		                      	  }
		                     }
		                  },
                   title: {
                    text: 'Domains'
                },   
		        },
		        yAxis: {
		            min: 0,
		            title: {
		                text: 'No. of compliances'
		            },
		            stackLabels: {
		                enabled: true,
		                style: {
		                    fontWeight: 'bold',
		                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
		                }
		            }
		        },
		        legend: {
		            align: 'right',
		            x: -35,
		            verticalAlign: 'top',
		            y: 25,
		            floating: true,
		            backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
		            borderColor: '#CCC',
		            borderWidth: 1,
		            shadow: false
		        },
		        tooltip: {
		            headerFormat: '<b>{point.x}</b><br/>',
		            pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
		        },
		        plotOptions: {
		            column: {
		                stacking: 'normal',
		                dataLabels: {
		                    enabled: true,
		                    color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
		                    style: {
		                        textShadow: '0 0 3px black'
		                    }
		                }
		            }
		        },
		        series: [{
		            name: 'Complied',
		            data: complied
		        }, {
		            name: 'Delayed Compliance',
		            data: delayed
		        }, {
		            name: 'Inprogress',
		            data: inprogress
		        }, {
		            name: 'Not Complied',
		            data: not_complied
		        }]
		    });
		});
    }

    function loadEscalationsBar(){
    	$("#viewaspie").show();
    	$("#viewasbar").hide();
    	$("#back").hide();
    	$(function () {
        	var color = [6];
            var not_complied = 0;
        	var drill="";
        	var delayed= 0;
        	var title = "";
        	if($('#radio4').is(':checked')){
	            color= ['#00FF00','#FFA500','#FFC0CB','#008000','#FF0000'  ];
	            not_complied = 3;
	            drill = "unitesc";
	            delayed = 10;
	            title = "South Gate, Madurai";
	        }else if($('#radio3').is(':checked')){
	            color= ['#FFA500','#FF0000' ,'#FFC0CB', '#00FF00','#008000' ];
	            not_complied = 4;
	            drill = "divisionesc";
	            delayed = 5;
	            title = "Manufacturing Division";
	        }else if($('#radio2').is(':checked')){
	        	color= ['#008000', '#FFA500', '#FF0000', '#FFC0CB', '#00FF00'];
	            not_complied = 6;
	            drill = "entityesc";
	            delayed = 10;
	            title = "KG";
	        }else if($('#radio1').is(':checked')){
			   color= [Highcharts.getOptions().colors[2],Highcharts.getOptions().colors[5] ,'#FFC0CB', '#00FF00','#008000' ]; 
	            not_complied = 8;
	            drill = "groupesc";
	         	delayed = 10;
	         	title = "KG Groups";
	        }
            $('#container').highcharts({
            	colors : color,
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Escalations - '+title
                },
                xAxis: {
                    type: 'category'
                },
                yAxis: {
                    title: {
                        text: 'Total Tasks'
                    }

                },
                legend: {
                    enabled: false
                },
                plotOptions: {
                	column:{
		        		point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) {
                                 loadDrillDownData(drilldown); 
                                }
                            }
                          }
                        }
		        	},
                    series: {
                        borderWidth: 0,
                        dataLabels: {
                            enabled: true,
                            format: '{point.y:.0f}'
                        }
                    }
                },

                tooltip: {
                    headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                    pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.0f}</b> of total<br/>'
                },

                series: [{
                    name: "Tasks",
                    colorByPoint: true,
                    data: [{
                        name: "Delayed Tasks",
                        y: delayed,
                    }, {
                        name: "Not Complied Tasks",
                        y: not_complied,
                        drilldown:drill
                    }]
                }]        
            });
        });
    }

    function loadEscalations(){
    	$("#viewasbar").show();
    	$("#viewaspie").hide();
    	$("#back").hide();
    	$("#unit-auto").show();
        $("#entity-auto").show();
        $("#division-auto").show();
        $(".SumoSelect").hide();
        $(function () {
        		var not_complied = 0;
        		var drill="";
        		var delayed= 0;
        		var title = "";
        		if($('#radio4').is(':checked')){
	                color= ['#00FF00','#FFA500','#FFC0CB','#008000','#FF0000'  ];
	                not_complied = 3;
	                drill = "unitesc";
	                delayed = 10;
	                title = "South Gate, Madurai";
	            }else if($('#radio3').is(':checked')){
	                color= ['#FFA500','#FF0000' ,'#FFC0CB', '#00FF00','#008000' ];
	                not_complied = 4;
	                drill = "divisionesc";
	                delayed = 5;
	                title = "Manufacturing Division";
	            }else if($('#radio2').is(':checked')){
	                color= ['#008000', '#FFA500', '#FF0000', '#FFC0CB', '#00FF00'];
	                not_complied = 6;
	                drill = "entityesc";
	                delayed = 10;
	                title = "KG";
	            }else if($('#radio1').is(':checked')){
	               color= [Highcharts.getOptions().colors[2],Highcharts.getOptions().colors[5] ,'#FFC0CB', '#00FF00','#008000' ]; 
	               not_complied = 8;
	               drill = "groupesc";
	               delayed = 10;
	               title = "KG Groups";
	            }
              $('#container').highcharts({
                  colors: color,
                  chart: {
                      type: 'pie',
                      options3d: {
                          enabled: true,
                          alpha: 30
                      }
                  },
                  title: {
                      text: 'Escalations - '+title
                  },
                  subtitle: {
                      text: ''
                  },
                  plotOptions: {
                      pie: {                          
                          depth: 45,
                          point: {
	                        events: {
	                            click: function() {
	                                var drilldown = this.drilldown;
	                                if (drilldown) { 
	                                	loadDrillDownData(drilldown);
	                                }
	                            }
	                          }
                        }
                      }
                  },
                  series: [{
                      name: 'Clients',
                      data: [
                      	  {
                      	  	name:"Not Complied",
                      	  	y:not_complied,
                      	  	drilldown:drill
                      	  },{
                      	  	name:"Delayed Compliance",
                      	  	y:delayed,
                      	  }              
                      ]
                  }]
              });
          });
    }

    $(document).ready(function () {
    $(".textboxgroup").hide();
    $(".textboxcompany").hide();
    $(".textboxdivision").hide();
    $(".textboxbranch").hide();
    
    $("#radio1").click(function () {
        $(".textboxgroup").hide();
        $(".textboxcompany").hide();
        $(".textboxdivision").hide();
        $(".textboxbranch").hide();
    });
   $("#radio2").click(function () {
        $(".textboxgroup").hide();
        $(".textboxcompany").show();
        $(".textboxdivision").hide();
        $(".textboxbranch").hide();
    });
   $("#radio3").click(function () {
        $(".textboxgroup").hide();
        $(".textboxcompany").hide();
        $(".textboxdivision").show();
        $(".textboxbranch").hide();
    });
   $("#radio4").click(function () {
        $(".textboxgroup").hide();
        $(".textboxcompany").hide();
        $(".textboxdivision").hide();
        $(".textboxbranch").show();
    });
});


  </script>
<!--<div class="notification-container">
  <ul>
    <li>
      <p class="notification-text">Contract with Service provider 1 will be expired in a month</p>
      <p class="time">Tue, 21 July, 2015, 9.43AM</p>
      <p class="notification-cat">Category: <span>Service Provider</span></p>
    </li>
    <li>
      <p class="notification-text">Contract with Service Provider 2 has been expired</p>
      <p class="time">Tue, 21 July, 2015, 9.43AM</p>
      <p class="notification-cat">Category: <span>Service Provider</span></p>
    </li>
    <li>
      <p class="notification-text">Preparation of wage Register Completed</p>
      <p class="time">Tue, 21 July, 2015, 9.43AM</p>
      <p class="notification-cat">Category: <span>Task Completed</span></p>
    </li>
    <li>
      <p class="notification-text">Registration Task Completed</p>
      <p class="time">Mon, 20 July, 2015, 9.43AM</p>
      <p class="notification-cat">Category: <span>Task Completed</span></p>
    </li>
    <li>
      <p class="notification-text">Muster roll Task delayed by 2 daays</p>
      <p class="time">Mon, 20 July, 2015, 9.43AM</p>
      <p class="notification-cat">Category: <span>Task delayed</span></p>
    </li>
    <li>
      <p class="notification-text">Form 26 has been Acknowledged</p>
      <p class="time">Fri, 17 July, 2015, 9.43AM</p>
      <p class="notification-cat">Category: <span>Acknowledged</span></p>
    </li>
    <li>
      <p class="notification-text">Task Attendance Collection must be submitted today</p>
      <p class="time">Fri, 17 July, 2015, 9.43AM</p>
      <p class="notification-cat">Category: <span>Submission Reminder</span></p>
    </li>
    <li>
      <p class="notification-text">Task 67 has been completed</p>
      <p class="time">Thu, 17 July, 2015, 9.43AM</p>
      <p class="notification-cat">Category: <span>Task Completed</span></p>
    </li>
    <li>
      <p class="notification-text">Task 64 has been delayed by 4 days</p>
      <p class="time">Thu, 17 July, 2015, 9.43AM</p>
      <p class="notification-cat">Category: <span>Task delayed</span></p>
    </li>
  </ul>
</div>-->
<!-- notification section end here -->

<div class="content-container" >
<div class="content-area">
  <div class="archive-container" style="width:95%;margin-bottom: 40px;">
    <div class="archive-header">
      <!-- <span class="group-tab active" >Group</span>
      <span class="company-tab">Company</span>
      <span class="division-tab">Division</span>
      <span class="unit-tab">Unit</span> -->
      <span class="task-status-tab active" id="task">Task Status</span>
      <span class="actwise-tab" id="act" >Domainwise Compliance</span>
      <span class="compliance-tab" id="comp">Compliance Opportunity</span>
      <span class="esc-tab" id="esc">Escalations</span>
      <span class="usecom-tab" id="usecom">Userwise Compliance</span>
    </div>
    <!-- archive tab content start here -->
      <div class="archive-tab-content">
        <div class="archive-list-content" style="width:100% !important;">
          <div class="grid-table-dash">
            <div class="input-row-left">
             <div class="input-row">
                <div class="field-label">Legal Entity:</div>
                <div class="field-input"><input type="text" class="input-box icon-autocomplete" placeholder="Legal Entity"></div>
              </div>
          </div>
          <div class="input-row-right">
            <div class="input-row">
                <div class="field-label">Divsion:</div>
                <div class="field-input"><input type="text" class="input-box icon-autocomplete" placeholder="Division"></div>
              </div>
          </div>
            <table>
              <tr>
                <th width="4%" align="center">#</th>
                <th width="15%" align="left">User</th>
                <th width="15%" align="left">Unit</th>
                <th width="10%" align="center">Total</th>
                <th width="10%" align="center">Compiled</th>
                <th width="10%" align="center">Delayed</th>
                <th width="10%" align="center">Inprogress</th>
                <th width="10%" align="center">Not compiled</th>
                <th width="10%" align="center">Performance %</th>
              </tr>
              <tr>
                <td width="4%" align="center"></td>
                <td width="15%" align="left"></td>
                <td width="15%" align="left"><input type="text"  class="filter-text-box"></td>
                <td width="10%" align="center"></td>
                <td width="10%" align="center"></td>
                <td width="10%" align="center"></td>
                <td width="10%" align="center"></td>
                <td width="10%" align="center"></td>
                <td width="10%" align="center"></td>
              </tr>
              <tr align="center">
                <td>1</td>
                <td align="left"><a href="#"><span class="usecom1-tab">Sivaraman</span></a></td>
                <td align="left">Madurai Unit</td>
                <td>10</td>
                <td>06</td>
                <td>02</td>
                <td>01</td>
                <td>01</td>
                <td>60%</td>
              </tr>
              <tr align="center">
                <td>2</td>
                <td align="left"><a href="#">Vijayan</a></td>
                <td align="left">Namakkal Unit</td>
                <td>08</td>
                <td>04</td>
                <td>01</td>
                <td>02</td>
                <td>01</td>
                <td>50%</td>
              </tr>
              <tr align="center">
                <td>3</td>
                <td align="left"><a href="#">Sivanathan</a></td>
                <td align="left">Tuticorin Unit</td>
                <td>09</td>
                <td>04</td>
                <td>02</td>
                <td>02</td>
                <td>01</td>
                <td>44.4%</td>
              </tr>
              <tr align="center">
                <td>4</td>
                <td align="left"><a href="#">Velmurugan</a></td>
                <td align="left">Tirunelveli Unit</td>
                <td>10</td>
                <td>04</td>
                <td>03</td>
                <td>02</td>
                <td>01</td>
                <td>40%</td>
              </tr>
              <tr align="center">
                <td>5</td>
                <td align="left"><a href="#">Vetriselvam</a></td>
                <td align="left">Namakkal Unit</td>
                <td>08</td>
                <td>02</td>
                <td>04</td>
                <td>01</td>
                <td>01</td>
                <td>25%</td>
              </tr>
            </table>
          </div>
          <div class="grid-table-dash1">
            <table>
              <tr>
                <td colspan="5" style="background-color:#FFF;"><h1 style=" color:#000 !important; vertical-align:middle; padding-bottom:0.5em;">User : Sivaraman</h1></td>
              </tr>
              <tr>
              <td colspan="5" style="background-color:#999; color:#FFF;">Status: Compiled</td>
              </tr>
              <tr align="left">
                <th width="5%" align="center">#</th>
                <th width="45%">Task</th>
                <th width="15%">Assign Date</th>
                <th width="15%">Actual due date</th>
                <th width="15%">Date of completion</th>
              </tr>
              <tr>
                <td align="center">1</td>
                <td>Opening and closing hours</td>
                <td>10/08/205</td>
                <td>15/08/205</td>
                <td>14/08/205</td>
              </tr>
              <tr>
                <td align="center">2</td>
                <td>Daily and Weekly Hours</td>
                <td>10/08/205</td>
                <td>15/08/205</td>
                <td>15/08/205</td>
              </tr>
              <tr>
                <td align="center">3</td>
                <td>Overtime</td>
                <td>10/08/205</td>
                <td>16/08/205</td>
                <td>15/08/205</td>
              </tr>
              <tr>
                <td align="center">4</td>
                <td>Rest interval</td>
                <td>12/08/205</td>
                <td>18/08/205</td>
                <td>17/08/205</td>
              </tr>
              <tr>
                <td align="center">5</td>
                <td>Spread over</td>
                <td>12/08/205</td>
                <td>20/08/205</td>
                <td>18/08/205</td>
              </tr>
              <tr>
                <td align="center">6</td>
                <td>Weekly Holiday</td>
                <td>15/08/205</td>
                <td>24/08/205</td>
                <td>24/08/205</td>
              </tr>
              <tr>
              <td colspan="5" style="background-color:#999; color:#FFF;">Status: Delayed</td>
              </tr>
              <tr align="left">
                <th align="center">#</th>
                <th>Task</th>
                <th>Assign Date</th>
                <th>Actual due date</th>
                <th>Date of completion</th>
              </tr>
              <tr>
                <td align="center">1</td>
                <td>Leave</td>
                <td>10/08/205</td>
                <td>24/08/205</td>
                <td>-</td>
              </tr>
              <tr>
                <td align="center">2</td>
                <td>Display of name board</td>
                <td>12/08/205</td>
                <td>22/08/205</td>
                <td>-</td>
              </tr>
              <tr>
              <td colspan="5" style="background-color:#999; color:#FFF;">Status: Inprogress</td>
              </tr>
              <tr align="left">
                <th align="center">#</th>
                <th>Task</th>
                <th>Assign Date</th>
                <th>Actual due date</th>
                <th>Date of completion</th>
              </tr>
              <tr>
                <td align="center">1</td>
                <td>Form P - Register of fines,deduction for damages or loss and advance</td>
                <td>15/08/205</td>
                <td>30/08/205</td>
                <td>-</td>
              </tr>
              <tr>
              <td colspan="5" style="background-color:#999; color:#FFF;">Status: Not compiled</td>
              </tr>
              <tr align="left">
                <th align="center">#</th>
                <th>Task</th>
                <th>Assign Date</th>
                <th>Actual due date</th>
                <th>Date of completion</th>
              </tr>
              <tr>
                <td align="center">1</td>
                <td>Form Q - Register of employment</td>
                <td>15/08/205</td>
                <td>20/08/205</td>
                <td>-</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      <!-- archive tab content end here -->
      <div id="level-filter" style="width:100%">
      			<input type="hidden" id="hidden"/>
                <div style="margin: 32px 10px 0px 100px;float:left">
                    <span>Filter By:</span>
                </div>
                <div class="leftmargin">
                    <input type="radio" name="radio" id="radio1" class="radio" checked/>
                    <label for="radio1" id="radiolabel"  style="width:120px">Group</label>
                    <div class="textboxgroup">
				    <p>
				        <input type="text" name="text1" id="text1" autofocus class="input-box icon-autocomplete margin10">
				    </p>
				</div>

                </div>
                <div class="leftmargin">
                    <input type="radio" name="radio" id="radio2" class="radio"/>
                    <label for="radio2" id="radiolabel"  style="width:120px">Legal Entity</label>
                    <div class="textboxcompany">
				    <p style="margin-top:5px;float:left;width:140px">
				        <input type="text" name="text2" id="entity-auto" value="KG" autofocus class="input-box icon-autocomplete" style="width:120px">
				        <select id="legal-entity" multiple="multiple" placeholder="Select Domain" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box" style="120px">
			              <option value="KG Autoparts" selected>KG Autoparts</option>
			              <option value="KG Transports" selected>KG Transports</option>
			              <option value="KG Booking" selected>KG Booking</option>
			              <option value="KG Electricals" selected>KG Electricals</option>
			              <option value="KG Mobiles" selected>KG Mobiles</option>
			            </select>
				    </p>
				    <span><a href="#"><input id="go-le" type="button" class="btn" value="Go" style="float:right;margin-top:-25px;margin-right:-2px"/></a></span>
				</div>
                </div>
                <div class="leftmargin">
                    <input type="radio" name="radio" id="radio3" class="radio"/>
                    <label for="radio3" id="radiolabel"  style="width:120px">Division</label>
                    <div class="textboxdivision">
					    <p style="margin-top:5px;float:left;width:140px">
					        <input type="text" name="text3" id="division-auto" autofocus value="Manufacturing" class="input-box icon-autocomplete" style="width:120px">
					        <select id="division" multiple="multiple" placeholder="Select Domain" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box" style="width:120px;">
					              <option value="KG Manufacturing" selected>KG Manufacturing</option>
					              <option value="KG Sales" selected>KG Sales</option>
					              <option value="KG Quality Checking" selected>KG Quality Checking</option>
					              <option value="KG Administration" selected>KG Administration</option>
					              <option value="KG Testing" selected>KG Testing</option>
			            	</select>
				    	</p>
				    	<span><a href="#"><input id="go-d" type="button" class="btn" value="Go" style="float:right;margin-top:-25px;margin-right:-2px"/></a></span>
					</div>
                </div>
                <div class="leftmargin">
                    <input type="radio" name="radio" id="radio4" class="radio"/>
                    <label for="radio4" id="radiolabel" style="width:120px">Unit</label>
                    <div class="textboxbranch">
					    <p style="margin-top:5px;float:left;width:140px">
					         <input type="text" name="text4" id="unit-auto" autofocus value="South Gate, Madurai"  class="input-box icon-autocomplete" style="width:120px">
					    <select id="unit" multiple="multiple" placeholder="Select Domain" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box" style="width:120px;">
					              <option value="Aviyur, Madurai" selected>Aviyur, Madurai</option>
					              <option value="South Gate, Madurai" selected>South Gate, Madurai</option>
					              <option value="Padi, Chennai" selected>Padi, Chennai</option>
					              <option value="Periyar, Madurai" selected>Periyar, Madurai</option>
					              <option value="Mattuthavani, Madurai" selected>Mattuthavani, Madurai</option>
			            	</select>
				    	</p>
				    	<span><a href="#"><input id="go-u" type="button" class="btn" value="Go" style="float:right;margin-top:-25px;margin-right:-2px"/></a></span>
					</div>

                </div>
                
          </div>

    <div class="graph-box">
          <input type="button" id="viewaspie" style="float:right;margin-right:20px" value="View as Pie chart"/>
          <input type="button" id="viewasbar" style="float:right;margin-right:20px" value="View as Bar chart"/>
          <input type="button" id="back" onClick="loadGroup()" style="float:right;margin-right:20px" value="Back"/>
          <div class="clearfix"></div>
          <div id="container" style="height: 400px;"></div>
        </div>
    </div>
  <div class="reminder-box">
    <div class="reminder-box-heading"> <span><img src="images/dashboard/icon-reminder.png"></span>
      <spam>
      Reminder</span> </div>
    <div class="reminder-box-content">
      <ul>
        <li>Contract with Service Provider will ends in one month <span>Wed, 22, 2015</span></li>
        <li>Task Form 16 Should be completed today <span>Wed, 22, 2015</span></li>
        <li>Task Muster Roll must be submitted today<span>Mon, 27, 2015</span></li>
        <li>Contract with Service Provider is ending today <span>Tue, 28, 2015</span></li>
        <li>Task Registration is delayed by 4 days<span>Fri, 31, 2015</span></li>
      </ul>
      <p><a href="#">Read more...</a></p>
    </div>
  </div>
  <div class="escalations-box">
    <div class="escalations-box-heading"> <span><img src="images/dashboard/icon-info.png"></span> <span>Escalations</span> </div>
    <div class="reminder-box-content">
       <ul>
        <li>Form R - Register of Wages
        <span>Sridhar 
        <abbr class="page-load" title=" Penal Provision goes here
"><img src="images/dashboard/icon-info.png"  style="width:15px;height:15px"> </abbr>
        </span>
        </li>
        <li>Form S - Notice<span>Dinagar <abbr class="page-load" title=" Penal Provision goes here
"><img src="images/dashboard/icon-info.png"  style="width:15px;height:15px"> </abbr>
        </span></li>
        <li>Form T - Wage Slip<span>Dinesh <abbr class="page-load" title=" Penal Provision goes here
"><img src="images/dashboard/icon-info.png"  style="width:15px;height:15px"> </abbr>
        </span></li>
        <li>Opening and Closing hours<span>Ramesh <abbr class="page-load" title=" Penal Provision goes here
"><img src="images/dashboard/icon-info.png"  style="width:15px;height:15px"> </abbr>
        </span></li>
        <li>Daily and weekly hours<span>Suresh <abbr class="page-load" title=" Penal Provision goes here
"><img src="images/dashboard/icon-info.png"  style="width:15px;height:15px"> </abbr>
        </span></li>
        <li>Spread over<span>Luthar <abbr class="page-load" title=" Penal Provision goes here
"><img src="images/dashboard/icon-info.png"  style="width:15px;height:15px"> </abbr>
        </span></li>
      </ul>
            
        <p><a href="#">Read more...</a></p>
    </div>
  </div>
  
</div>
</div>

<script>
$(function(){
  $('#text2').autoComplete({
      minChars: 1,
      source: function(term, suggest){
          term = term.toLowerCase();
          var choices = ['Bajaj Allianz Group', 'PRG Group', 'TVS Group'];
          var suggestions = [];
          for (i=0;i<choices.length;i++)
              if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
          suggest(suggestions);
      }
  });
  $('#text3').autoComplete({
      minChars: 1,
      source: function(term, suggest){
          term = term.toLowerCase();
          var choices = ['Auto Parts - Manufacturing', 'Division 1', 'Division 2'];
          var suggestions = [];
          for (i=0;i<choices.length;i++)
              if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
          suggest(suggestions);
      }
  });
  $('#text4').autoComplete({
      minChars: 1,
      source: function(term, suggest){
          term = term.toLowerCase();
          var choices = ['South Gate, Madurai', 'Periyar, Madurai', 'Mattuthavani, Madurai'];
          var suggestions = [];
          for (i=0;i<choices.length;i++)
              if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
          suggest(suggestions);
      }
  });
   
});
</script>
{% endblock %} 